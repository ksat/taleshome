---
layout: fanquery
title: Develop a fanquery plugin
secondtitle: develop
permalink: /develop-fanquery-plugin
---

<div style="padding:10px">
  <div class="text-title" style="margin-top:5px">
    I) Adding more methods to Jq class
  </div>
  <div class="text-text">
      Make sure you have read how to use <a href="/using-a-fanquery-plugin">fanqery plugins</a> before you read this page. <br/> In any app if you want to add more methods to the Jq class, you can do it. For eg., let's add a method "slideUpAndDown" to Jq class. Open fan/Jq.fan and modify it as below
    <pre>using fanquery
using fancybox

@Js
class Jq : JqBase{
  new make(Obj? selector, JqBase? context := null) 
                            : super(selector, context){}
  <strong>Void slideUpAndDown(){</strong>
    <strong>slideUp.slideDown</strong>
  <strong>}</strong>
}</pre> 
    That's it. Now you can use this method like this 
<pre>Jq("link").click{
 Jq("button").slideUpAndDown
}</pre>
		Now let's go on to see how to develop reusable fanquery plugins
  </div>
  <div class="text-title" style="margin-top:5px">
    II) Write a pure fantom fanquery plugin
  </div>

  <div class="text-text">
    Let's develop a simple plugin called "betterclick" that will show an alert when clicked on anything it's attached to:
  </div>

  <div class="text-text">
      1) Create a regular pod "betterclick" with on mixin BetterClick on it. Code it like this
<pre>using fanquerybase
using dom

@Js
mixin BetterClick{
  JqBase betterClick(){
    JqBase self := (Obj)this

    self.click|cur, event|{
      Win.cur.alert("Ouch, you clicked me...")
      event.preventDefault
    }

    return self
  }
}</pre>
      </div>
      <div class="text-text">
          That's it. Build pod. Now you can use it in <a href="/using-a-fanquery-plugin">your app like this</a>
      </div>           
  </div>
 
  <div class="text-text">
    Distribute betterclick.pod and your consumer's will be able to use the betterclick() method like this:
  <pre>Jq("#mylink").betterClick()</pre>              

  </div>

  <div class="text-title" style="margin-top:5px">
    III) Porting a Existing Jquery plugin
  </div>

  <div class="text-text">
    Let's see how to code the fancybox plugin. Almost all the steps remains same, except you need to write some native javascript code 
  </div>

  <div class="text-text">
  1) Write a regular pod("fancybox") with one class FancyBox like this
  <pre>using fanquery
@Js
mixin FancyBox{
  Void fancybox([Str:Obj]? props := null){
    JqBase self := (Obj)this
    FancyBoxNative.fancybox(self, props)
  }

  static Void close(){
    FancyBoxNative.close
  }
}

@Js
class FancyBoxNative{
  native static Void fancybox(JqBase self, [Str:Obj]? props := null)
  native static Void close()
}</pre>

  </div>
  <div class="text-text">
    add <strong>js/FanyBoxNativePeer.js</strong> which looks like this
  <pre>fan.fancybox.FancyBoxNativePeer = fan.sys.Obj.$extend(fan.sys.Obj);
  
fan.fancybox.FancyBoxNativePeer.fancybox = function(self, props){
  var jsProps = toJsMap(props);
  if(jsProps){
    self.selector.fancybox(jsProps);
  }
  else{
    self.selector.fancybox();
  }

}</pre>
  </div>
  <div class="text-text">
      You can also add a <strong>fan/Conf.fan</strong>. It defines the set of additional js files that needs to be delivered. You can also optionally deliver more js files depending on conf parameter. You can include all these files in your pods res/ directory.
      <pre>class Conf{
  Str[] getExtraJsFiles([Str:Obj]? conf){
    args := ["res/fancybox/jquery.fancybox-1.3.4.js"]
    if(conf["easing"] == true){
      args.add("res/fancybox/jquery.easing.js")
    }
    return args
  }
}</pre>
  </div>
  <div class="text-text">
    Now when someone includes this plugin like this
<pre><strong>@Js</strong>
<strong>@Include{ plugins =[</strong>
      <strong>Plugin{name="fancybox"; conf=["easing":true]}</strong>
   <strong>]</strong>
<strong>}</strong>
class IndexJs{..}</pre>
    Both fancybox js and easing js will be included.
  </div>
</div>