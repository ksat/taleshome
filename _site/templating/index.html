<html>
 <head>
	<link rel="stylesheet" href="/css/first.css" type="text/css" />
	<title>Templating</title>
	<style type="text/css" media="screen">
	 	
		.header {
			display: block;
			overflow: hidden;
			height: 70px;
			padding-left:120px;
			padding-top:3px;
		}
		
		.container{
			width: 1000px;
			overflow: hidden;
		}
		
		
		
		#main {
			background-color: white;
			border-color: #CED5E0;
			-webkit-border-radius: 4px;
			-moz-border-radius: 4px;
			border-radius: 4px;
			display: block;
			-moz-box-shadow: 0 1px 5px rgba(0, 0, 0, .15);
			-webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, .15);
			box-shadow: 0 1px 5px rgba(0, 0, 0, .15);
			border: 1px #D5D5D5 solid;
			width:780px;
			margin-left:178px;
			margin-bottom:20px;
			z-index:200;
			opacity:0.8;
		}
		
		#inner{
			/*margin:10px;*/
		}
		
		ul li{
			list-style:none;
		}
		
		#sidebar0{
			width:180px;
			float:left;
			padding-top:10px;
		}
		
		#sidebar0 ul li{
			list-style:none;
		}
		
		#sidebar0 ul li.active {
			border:1px solid transparent;
			border-right:none !important;
			-webkit-border-top-left-radius: 5px;
			-webkit-border-bottom-left-radius: 5px;
			-moz-border-radius-top-left: 5px;
			-moz-border-radius-bottom-left: 5px;
			border-top-left-radius: 5px;
			border-bottom-left-radius: 5px;
			background: white;
			*background: none;
			*font-weight:bold;
			-moz-box-shadow: -5px 1px 5px 0px rgba(0, 0, 0, .15);
			-webkit-box-shadow: -3px 1px 5px .5px rgba(0, 0, 0, .15);
			box-shadow: -5px 1px 5px 0px rgba(0, 0, 0, .15);
			list-style:none;
			opacity:0.7;
			font-weight:bold;
		}
		
		
		
		li.active-grey{
			background:#FAFAFA !important;
		}
		
		#sidebar0 ul li a{
			text-align: right;
			display: block;
			padding: 18px ;
			font-size: 12px;
			text-decoration: none;
			padding-right: 20px;
			padding-top:15px;
		}
		
		#sidebar0 ul li.active a{
			padding-top:18px;
		}
		
		ul li a{
			text-align: right;
			display: block;
			font-size: 12px;
			text-decoration: none;
			padding-right: 20px;
			padding-bottom:8px;
		}
		
		a {
			color: #525252;
			/*text-decoration: none;*/
		}
		
		a.selected{
			font-weight: bold;
			color: #5092BD;
		}
		
		ul li a.selected{
			background:#666;
			color:white;
		}
		
		.text-title, .title-text {
			margin-top: 24px;
			color: #393;
			font-size: 16px;
			font-family: 'lucida grande',verdana;
		}
		
		
		.text-text {
			font-size: 13px;
			padding-left: 20px;
			margin-top: 10px;
			line-height: 18px;
		}
		pre, .output {
			color: #333;
			background: #EEE;
			-moz-border-radius: 5px;
			-webkit-border-radius: 5px;
			border: 1px solid #DFE0CD;
			padding: 10px;
			margin-top:4px;
			font-family: Consolas, monospace;
		}
		
		ul.inner{
			padding-left:0px !important;
		}
	</style>
	<script type="text/javascript">
			  var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-19500723-1']);
			  _gaq.push(['_trackPageview']);

			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();

			</script>
</head>
<body> 
	<div class="header" align="center">
			<div class="container" align="left">
				<table width="100%">
					<tr>
						<td align="left"><img src="/images/tales_logo.png" /></td>
						<td align="right" style="line-height:50px; padding-right:110px;">
							 <a href="http://help.talesframework.org/discussions/discuss">Discuss or ask a question</a>
						</td>
					<tr>
				</table>
			</div>
	</div>
	<div align="center">
		<div class="container" align="left" >
				
			<div id="sidebar0" style="float:left;margin-right:0px;">
					<ul>
							<li >
								<a href="/" >Home</a>
							 </li>
					</ul>
					
					<div style="text-align:right; font-weight:bold;margin-right:20px; color:#393;font-size:13px;">
							The Basics
					</div>
					<ul>
						 	<li talesId="firstApp" >
								<a href="/install-tales" >Install and make Your first app</a>
							 </li>
							<li talesId="examples">
								<a href="http://examples.talesframework.org/" >Examples</a>
							  </li>
							<li talesId="ide" >
								<a href="/eclipse" >IDE setup</a>
							 </li>
							<li talesId="gf" >
								<a href="/gf-intro" class="">A more complete application</a>
							 </li>
							<li talesId="anatomy" >
								<a href="/anatomy" class="">App Directory structure</a>
							 </li>
						</ul>
						<div align="right">
						<div style="text-align:right; border-top:1px solid #ccc; padding-top:10px; font-weight:bold;margin-right:20px; color:#393;font-size:13px; width:120px;">
								Docs
						</div>
						</div>
						<ul>
							<li talesId="howtos"  class="active" >
								<a href="/templating" >Tales</a>
							 </li>	
							<!--
							<li talesId="templating">
								<a href="/templating" >Templating</a>
							 </li>
							 <li talesId="routing">
								<a href="/routing">Routing</a>
							  </li>
							-->
								<li talesId="fanquery" >
									<a href="/what-is-fanquery" class="">Fanquery</a>
								 </li>
								<li talesId="fanbatis" >
									<a href="/fanbatis" class="">Fanbatis</a>
								 </li>
							</ul>
			 </div>
				<div id="main">
					<div id="inner" >
						<html>
	<head>
			
			<style type="text/css" media="screen">
				div.desc{
					color:#555;
					font-size:12px;
					line-height:15px;
				}
				ol{
					padding-left:20px;
					padding-right:10px;
				}
				.example-link{
					line-height:18px;
					padding-top:10px;
					border-bottom:1px dashed #ccc;
				}
				
				a.selected{
					color:#5092BD !important;
					font-weight:bold;
					background:none !important;
				}
				
				ol.inner li{
					padding-top:20px;
				}
			</style>
	</head>
	<body>
			<div style="overflow:hidden;">
					<table width="100%" cellspacing="0" cellpadding="0">
						<tr>
							<td valign="top" style="width:150px;background:#FAFAFA;height:200px;padding:10px;border-right:1px solid #eee">
								<ul class="inner">
									<li>
										<a class="example-link selected" talesId="templating" href="/templating">Templating</a>
									</li>
									<li>
										<a class="example-link " talesId="routing" href="/routing">Routing</a>
									</li>
									<li>
										<a class="example-link " talesId="custom" href="/custom">Custom Error and NotFound pages</a>
									</li>
									<li>
										<a class="example-link " talesId="websockets" href="/websockets">Websockets</a>
									</li>
									<li>
										<a class="example-link " talesId="https" href="/https">Https</a>
									</li>
									<li>
										<a class="example-link " talesId="chunked-writing" href="/streaming">Ansyc and Streaming</a>
									</li>
									<li>
										<a class="example-link " talesId="session-handling" href="/sessions">Session Handling</a>
									</li>
									<li>
										<a class="example-link " talesId="session-handling" href="/background-jobs">Startup &amp; Background Jobs</a>
									</li>
									
								</ul>
							</td>
							<td valign="top" style="padding:10px;" align="left">
								<div talesId="child">     <div style="padding:25px;">
        Templating is way to generate dynamic pages. In tales Html stays html and you use a jquery like api to put dynamic data into it

        <div class="text-title">
            Html templating
        </div>
        <div class="text-text">
          A html page that is displayed will at minimum have two file associate with it
          <ul>
            <li>a html template file</li>
            <li>a fantom file that "puts" dynamic data into it </li>
          </ul>
        </div>
        <div class="text-text">
          Let's start with an example, create a new tales app. The home page that you see is generated using
          <ul>
            <li>template/Index.html</li>
            <li>fan/Index.fan</li>
          </ul>
          Delete everything in Index.html and replace it with: 
          <pre>&lt;div talesId="name">Test&lt;/div> </pre>
          Open Index.fan and add this code in main() method: 
          <pre>html := Html("template/Index.html")
<strong>html.tag("text").text("Jhon")</strong>
response.writeTag(html)
</pre>
          Refresh the browser. The generated html will look like this
          <pre>&lt;div>Jhon&lt;/div></pre>
        </div>

        <div class="text-text">
          <strong style="#666">Things to note:</strong>
          <ol>
            <li>The only div in html, had a talesId = "name"</li>
            <li>The general syntax of markup in fan is
              <pre>html.tag("talesid").text(str)</pre>
            </li>
            <li>
            The output strips off the talesId but replaces the text of the tag with whatever you supplied in the fantom markup 
            </li>
          </ol>
        </div>


        <div class="text-text">
          <strong style="#666">Let's look at a deeper example</strong>
          <div>
            Imagine you wanted to display a text that greets the user. You could write something like
            <pre>username := "Kaushik"
html.tag("talesid").text("Hello, welcome &lt;b>$username&lt;/b>")</pre>

            A better way to do it would be to move all markups to html. You can write something like this: 
            <pre>&lt;div>Hello, welcome &lt;b talesId="name">Something&lt;/b>&lt;/div></pre>              
            and in markup
            <pre>username := "kaushik"
html.tag("name").text(username)
</pre>
          </div>
        </div>

        <div class="text-title">
            Changing other attributes
        </div>
        <div class="text-text" >
          You can manipulate other attributes using the ".attr()" method
        </div>
        <div class="text-text" >
          html:
          <pre>&lt;div talesId="name">Something&lt;/div></pre>
          fan:
          <pre>html.tag("name").text("Kaushik").attr("style", "color:red")</pre>
        will result in html 
        <pre>&lt;div style="color:red">Kaushik&lt;/div> </pre>            
        </div>
          <div class="text-text">
            <strong>Another example: </strong>
            <br/>
            Html:
            <pre>&lt;a href="#" talesId="myLink">Click here&lt;/a></pre>

            Fan:
            <pre>html.tag("myLink").attr("href","/user/id/1")</pre> 
            Will result in:
            <pre>&lt;a href="/user/id/1">Click here&lt;a></pre>           
          </div>
        
        
        <div class="text-title">
            Adding and removing classes and styles
        </div>
        <div class="text-text">
            The "Tag" class provides convenient shortcuts for adding and removing classes <br/>
        html:
          <pre>&lt;div talesId="name">Something&lt;/div></pre>
        fan:
        <pre>html.tag("name").addClass("active").addCss("color", "red")</pre>
        will result in html:
        <pre>&lt;div style="color:red" class="active">Kaushik&lt;/div> </pre> 
        </div>
      

      

        <div class="title-text">
          Nested and duplicate markups
        </div>
        <div class="text-text">
          talesids need not be unique.
          <br/>
          Html:
          <pre>&lt;div talesId = "name" style="color:red">&lt;/div>
&lt;div talesId = "name" style="color:blue">&lt;/div>
</pre>
          Fan:
          <pre>html.tag("name").text("Jhon")</pre>
          Will result in html:
          <pre>&lt;div talesId = "name" style="color:red">Jhon&lt;/div>
&lt;div talesId = "name" style="color:blue">Jhon&lt;/div>
</pre>
        </div>
        <div class="text-text">
          talesIds can be nested. For eg. 
          <pre>
&lt;div talesId="two">&lt;/div>
&lt;div talesId = "one"> 
  &lt;div talesId = "two" >&lt;/div>
&lt;/div></pre>
          A fantom code like this
          <pre>html.tag("two").text("Hello")</pre>
          Will affect nested and non-nested tags like this
          <pre>
&lt;div>Hello&lt;/div>
&lt;div> 
  &lt;div>Hello&lt;/div>
&lt;/div></pre>
        However you can choose to affect only nested tags like this
        <pre>oneTag := html.tag("one")
oneTag.tag("two").text("Hello")</pre>
        The output will be
        <pre>
&lt;div>/div>
&lt;div talesId = "one"> 
&lt;div>Hello&lt;/div>
&lt;/div></pre>
        </div>
        

        <div class="title-text">
          Repeaters
        </div>
        <div class="text-text">
          You might want to repeat a tag multiple times
        </div>
        <div class="text-text">
          Html:
          <pre> &lt;div talesId="numbers">&lt;/div> 
</pre>          
          Fan:
          <pre>vals := ["One", "Two", "Three"]
html.tag("numbers").repeating
vals.each{
  tag := html.tag("numbers").addRow
  tag.text("$it")
}</pre>
            gives an output:
            <pre>&lt;div>One&lt;/div>
&lt;div>Two&lt;/div>
&lt;div>Three&lt;/div>
</pre>
        Repeating-tags themselves can have nested talesIds:
        <pre>&lt;ul>
  &lt;li talesId="number">
    &lt;span talesId="val">&lt;/span>
  &lt;/li>
&lt;/ul>
</pre>
        Fan:
        <pre>vals := ["One", "Two", "Three"]
html.tag("numbers").repeating
vals.each{
  numberRow := html.tag("numbers").addRow
  numberRow.tag("val").text("$it")
}</pre>
        gives an output:
        <pre>&lt;ul>
  &lt;li>
       &lt;span>One&lt;/span>
  &lt;/li>
  &lt;li>
       &lt;span>Two&lt;/span>
  &lt;/li>
  &lt;li>
       &lt;span>Three&lt;/span>
  &lt;/li>
&lt;/ul>
</pre>	
				
				Instead of calling ".repeating()" method you can call ".repeat(num)" if you know the number of times of repetition ahead of time. For eg.
				<pre>&lt;span talesId="name">Test&lt;/span></pre>
				and Fan:
				<pre>tags := html.tag("name").repeat(10)
tags.each|Tag tag, Int index|{
	tag.text("$index")
}
</pre>
        will result in html
				<pre>&lt;span>1&lt;/span>&lt;span>2&lt;/span>&lt;span>3&lt;/span></pre>
        </div>
        <div class="title-text">
          Panels and Layouts
        </div>
        <div class="text-text">
            There is no separate concept of panels and layouts but you can arbitrarily nest tags with file names for eg., Consider this panel
<pre>&lt;div>Hello, I am a panel&lt;/div></pre>
        </div>
        <div class="text-text">
            and another page
<pre>&lt;div> I am a parent panel <strong>&lt;div talesId="child">&lt;/div></strong>&lt;/div></pre>
        </div>
        <div class="text-text">
            You can include the panel in page like this
<pre>page := Html("template/page.html")
panel := Html("template/panel.html")
<strong>page.tag("child", panel)</strong>
response.writeTag(page)</pre> 
        </div>
        
				



        <div class="title-text">
          Apply method and "Cut and Send"
        </div>
				<div class="text-text">
						On any Html tag you can call the apply method to get the html <br/>
						for eg., Html:
						<pre>&lt;span talesId="name">&lt;/span></pre>
						and fan:
						<pre>html := Html("template/page.html")	
html.tag("name").text("Jhon")
Str result := html.apply
echo(result)
</pre>
					 	will print <strong>&lt;span >Jhon&lt;/span></strong> to the output.
						
				</div>
        <div class="text-text">
					You can only ask for portions of html instead of complete html. For eg.<br/>
					Html:
					<pre>&lt;span>Title&lt;/span>
Some other html
&lt;span talesId="age">&lt;/span>						
</pre>
					and fan
					<pre>ageTag := Html("template/page.html").cutAt("age")
ageTag.text("20")
result := ageTag.apply
echo(result)
</pre>
			will print <strong>&lt;span >20&lt;/span></strong> to the output (only html corresponding to tag with talesId="age"). 
        </div>
        
     </div></div>
							</td>
						</tr>
					</table>
			</div>
	</body>
</html>
					</div>
				</div>
			 
		</div>
	</div>
</body>
</html>